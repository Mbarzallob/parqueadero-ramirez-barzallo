<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">Gestión de Parqueaderos</h1>

    <div *ngIf="isLoading" class="text-center my-4">
        <p class="text-lg">Cargando datos...</p>
    </div>

    <div *ngIf="!isLoading" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
        <div *ngFor="let space of parkingSpaces" [class.bg-green-500]="space.status === 'available'"
            [class.bg-red-500]="space.status === 'occupied'" [class.bg-blue-500]="space.status === 'monthlyContract'"
            class="p-4 rounded shadow text-white flex flex-col justify-between">
            <h2 class="text-lg font-bold">Espacio {{ space.id }}</h2>
            <p><strong>Bloque:</strong> {{ space.block }}</p>
            <p><strong>Tipo:</strong> {{ space.type }}</p>
            <p><strong>Estado:</strong> {{ space.status | titlecase }}</p>

            <div *ngIf="space.status === 'monthlyContract'" class="mt-2 text-sm">
                <p><strong>Contrato:</strong> {{ space.contract?.id }}</p>
                <p><strong>Usuario:</strong> {{ space.contract?.userId }}</p>
                <p><strong>Inicio:</strong> {{ space.contract?.startDate | date:'shortDate' }}</p>
                <p><strong>Fin:</strong> {{ space.contract?.endDate | date:'shortDate' }}</p>
            </div>

            <div *ngIf="space.status === 'occupied'" class="mt-2 text-sm">
                <p><strong>Ocupación:</strong> {{ space.occupation?.id }}</p>
                <p><strong>Usuario:</strong> {{ space.occupation?.userId }}</p>
                <p><strong>Inicio:</strong> {{ space.occupation?.startTime | date:'shortTime' }}</p>
                <p><strong>Fin:</strong> {{ space.occupation?.endTime | date:'shortTime' }}</p>
            </div>
        </div>
    </div>
</div>